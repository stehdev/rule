# Shadowrocketå°ç«ç®­é…ç½®æ–‡ä»¶
# è¯·æ ¹æ®è‡ªèº«éœ€æ±‚ä¿®æ”¹é…ç½®ã€‚


[General]
# æ—è·¯ç³»ç»Ÿ - é˜²æ­¢ç³»ç»ŸåŠŸèƒ½å¼‚å¸¸ï¼ˆå¦‚æ¨é€é€šçŸ¥å»¶è¿Ÿï¼‰
bypass-system = true

# è·³è¿‡ä»£ç† - è¿™äº›åœ°å€ä¸èµ°ä»£ç†ï¼ŒåŒ…æ‹¬å±€åŸŸç½‘ã€Apple captive portalã€ä¸­å›½é“¶è¡Œã€ç™¾åº¦
skip-proxy = 192.168.0.0/16,10.0.0.0/8,172.16.0.0/12,localhost,*.local,captive.apple.com,*.ccb.com,*.abchina.com.cn,*.psbc.com,www.baidu.com

# TUNæ—è·¯è·¯ç”± - è®©éTCPåè®®ç»•è¿‡VPNéš§é“
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32

# DNSæœåŠ¡å™¨ - ä½¿ç”¨DoHåŠ å¯†DNSï¼ˆdoh.pub/é˜¿é‡ŒDNSï¼‰+ ä¼ ç»ŸDNSå¤‡ç”¨
dns-server = https://doh.pub/dns-query,https://dns.alidns.com/dns-query,223.5.5.5,119.29.29.29

# å¤‡ç”¨DNS - ä¸»DNSå¤±è´¥æ—¶å›é€€åˆ°ç³»ç»ŸDNS
fallback-dns-server = system

# IPv6æ”¯æŒ - å¯ç”¨IPv6ä½†ä¼˜å…ˆä½¿ç”¨IPv4
ipv6 = true
prefer-ipv6 = false

# DNSè®¾ç½®
dns-direct-system = false  # ç›´è¿è§„åˆ™ä¸ä½¿ç”¨ç³»ç»ŸDNS
icmp-auto-reply = true  # è‡ªåŠ¨å›å¤pingè¯·æ±‚
always-reject-url-rewrite = false  # REJECTé‡å†™è§„åˆ™ä»…åœ¨é…ç½®æ¨¡å¼ç”Ÿæ•ˆ
private-ip-answer = true  # å…è®¸DNSè¿”å›ç§æœ‰IPï¼ˆé˜²æ­¢è¯¯åˆ¤åŠ«æŒï¼‰
dns-direct-fallback-proxy = true  # ç›´è¿åŸŸåè§£æå¤±è´¥æ—¶ä½¿ç”¨ä»£ç†

# DNSåŠ«æŒ - æ‹¦æˆªç¡¬ç¼–ç çš„Google DNSæŸ¥è¯¢
hijack-dns = 8.8.8.8:53,8.8.4.4:53

# UDPå›é€€ç­–ç•¥ - ä¸æ”¯æŒUDPçš„èŠ‚ç‚¹å°†æ‹’ç»UDPæµé‡
udp-policy-not-supported-behaviour = REJECT

[Proxy Group]

ğŸš€ ç­–ç•¥é€‰æ‹© = select,â™»ï¸ ALL,ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹,ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹,ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹,ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹,ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹,ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹,ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹,ğŸ‡·ğŸ‡º ä¿„ç½—æ–¯èŠ‚ç‚¹,ğŸ‡®ğŸ‡³ å°åº¦,ğŸ‡©ğŸ‡ª å¾·å›½,ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§,interval=600,timeout=5,select=0,url=http://www.gstatic.com/generate_204
â™»ï¸ ALL = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=.*
ğŸ¤–ï¸ AI = select,ğŸš€ ç­–ç•¥é€‰æ‹©,ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹,ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹,ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹,ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹,ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹,ğŸ‡©ğŸ‡ª å¾·å›½,ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§, select=0
ğŸ è‹¹æœæœåŠ¡ = select, DIRECT, ğŸš€ ç­–ç•¥é€‰æ‹©, select=0
ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°æ¹¾|æ—¥æœ¬|æ–°åŠ å¡|ç¾å›½|éŸ©å›½|ç‹®åŸ|å—æœé²œ|US|SG|JP|KR|TW|å°ç£|ç¾åœ‹|éŸ“åœ‹|ç…åŸ)).)*$
ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?=.*(å°|TW|(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|æ–°|ç¾)).)*$
ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?=.*(ç¾å›½|ç¾åœ‹|US|æ´›æ‰çŸ¶|è¥¿é›…å›¾|(?i)States|American))^((?!(é¦™æ¸¯|å°æ¹¾|æ—¥æœ¬|æ–°åŠ å¡|éŸ©å›½|ç‹®åŸ|å—æœé²œ|SG|JP|KR|HK|TW|å°ç£|éŸ“åœ‹|ç…åŸ)).)*$
ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?=.*(KR|Korea|KOR|é¦–å°”|éŸ©|éŸ“|(?i)Korea))^((?!(é¦™æ¸¯|å°æ¹¾|æ–°åŠ å¡|ç¾å›½|ç‹®åŸ|å—æœé²œ|US|SG|HK|TW|å°ç£|ç¾åœ‹|ç…åŸ)).)*$
ğŸ‡·ğŸ‡º ä¿„ç½—æ–¯èŠ‚ç‚¹ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=ğŸ‡·ğŸ‡º|ä¿„ç½—æ–¯|RU|è«æ–¯ç§‘|åœ£å½¼å¾—å ¡|å–€å±±|å“ˆå°”ç§‘å¤«|ä¹Œæ³•|æ–°è¥¿ä¼¯åˆ©äºš|ä¸‹è¯ºå¤«å“¥ç½—å¾·|æ²ƒç½—æ¶…ä»€
ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=ğŸ‡¬ğŸ‡§|è‹±å›½|UK|ä¼¦æ•¦|è‹±æ ¼å…°|ä¼¯æ˜ç¿°|æ³°æ©æ²³ç•”çº½å¡æ–¯å°”|åˆ©å…¹|çˆ±ä¸å ¡|æ ¼æ‹‰æ–¯å“¥|è‹æ ¼å…°
ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?=.*(æ—¥æœ¬|JP|(?i)Japan))^((?!(é¦™æ¸¯|å°æ¹¾|æ–°åŠ å¡|ç¾å›½|éŸ©å›½|ç‹®åŸ|å—æœé²œ|US|SG|KR|HK|TW|å°ç£|ç¾åœ‹|éŸ“åœ‹|ç…åŸ)).)*$
ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=(?=.*(æ–°åŠ å¡|ç‹®åŸ|SG|(?i)Singapore))^((?!(é¦™æ¸¯|å°æ¹¾|æ—¥æœ¬|ç¾å›½|éŸ©å›½|å—æœé²œ|US|JP|KR|HK|TW|å°ç£|ç¾åœ‹|éŸ“åœ‹)).)*$
ğŸ‡®ğŸ‡³ å°åº¦ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=ğŸ‡®ğŸ‡³|å°åº¦|IN|IND|å­Ÿä¹°|æ–°å¾·é‡Œ|é«˜çŸ¥|Republic of India|India
ğŸ‡©ğŸ‡ª å¾·å›½ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=ğŸ‡©ğŸ‡ª|å¾·å›½|DEU|DE|æŸæ—|æ…•å°¼é»‘|æ±‰å ¡|ç§‘éš†|Germany
ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§ = select,url=http://www.gstatic.com/generate_204,interval=600,tolerance=100,timeout=5,policy-regex-filter=ğŸ‡¨ğŸ‡¦|åŠ æ‹¿å¤§|CA|æ¸¥å¤ªå

[Rule]
DOMAIN-SUFFIX,bestemby.com,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/OpenAI/OpenAI.list,ğŸ¤–ï¸ AI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Claude/Claude.list,ğŸ¤–ï¸ AI
RULE-SET,https://whatshub.top/rule/Grok.list,ğŸ¤–ï¸ AI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Gemini/Gemini.list,ğŸ¤–ï¸ AI
RULE-SET,https://whatshub.top/rule/ai.list,ğŸ¤–ï¸ AI
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Shadowrocket/FitnessPlus/FitnessPlus.list,ğŸš€ ç­–ç•¥é€‰æ‹©
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Shadowrocket/AppleProxy/AppleProxy.list,ğŸš€ ç­–ç•¥é€‰æ‹©
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list,ğŸ è‹¹æœæœåŠ¡
RULE-SET,https://whatshub.top/rule/LinkedIn.list,ğŸš€ ç­–ç•¥é€‰æ‹©
RULE-SET,https://whatshub.top/rule/Kindle.list,ğŸš€ ç­–ç•¥é€‰æ‹©
RULE-SET,https://whatshub.top/rule/ASN-CN.list,DIRECT

# æœ¬åœ°å±€åŸŸç½‘åœ°å€çš„è§„åˆ™é›†
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Lan/Lan.list,DIRECT

# è¡¨ç¤ºCNåœ°åŒºçš„IPåˆ†æµèµ°ç›´è¿ï¼ŒGEOIPæ•°æ®åº“ç”¨æ¥åˆ¤æ–­IPæ˜¯å¦å±äºCNåœ°åŒºã€‚é»˜è®¤ä½¿ç”¨Shadowrocketè‡ªå¸¦çš„GEOIPæ•°æ®åº“ï¼Œå¦‚æœæ‚¨æƒ³æ›¿æ¢å…¶ä»–æ•°æ®åº“ï¼Œå¯åœ¨ è®¾ç½® - GeoLite2æ•°æ®åº“ é‡Œæ·»åŠ å’Œä¿®æ”¹ã€‚
GEOIP,CN,DIRECT

# è¡¨ç¤ºå½“å…¶ä»–æ‰€æœ‰è§„åˆ™éƒ½åŒ¹é…ä¸åˆ°æ—¶æ‰ä½¿ç”¨FINALè§„åˆ™çš„ç­–ç•¥ã€‚
FINAL,ğŸš€ ç­–ç•¥é€‰æ‹©

[Host]
# åŸŸåæŒ‡å®šæœ¬åœ°å€¼ï¼š
# example.com = 1.2.3.4

# åŸŸåæŒ‡å®š DNS æœåŠ¡å™¨ï¼š
# example.com = server:1.2.3.4

# wifiåç§°æŒ‡å®š DNS æœåŠ¡å™¨ï¼Œå¦‚éœ€æŒ‡å®šå¤šä¸ª DNSï¼Œå¯ç”¨é€—å·åˆ†éš”ï¼š
# ssid:wifiåç§° = server:1.2.3.4

*.apple.com = server:system
*.icloud.com = server:system
localhost = 127.0.0.1

[URL Rewrite]
# Googleæœç´¢å¼•æ“é˜²è·³è½¬çš„é‡å†™ã€‚
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302
